# API åˆ—è¡¨
## ğŸŸ£ Simulated KMS API (FastAPI)

é€™è£¡æ‰€æœ‰è«‹æ±‚éƒ½éœ€è¦ç¶“éæˆæ¬Šæ‰èƒ½åŸ·è¡Œ

|Endpoint|æ–¹æ³•|è§’è‰²|ç”¨é€”|
|---|---|---|---|
|`/kms/generate-data-key`|POST|user|ç”¢ç”Ÿä¸€å€‹ DEK ä¸¦ä»¥å„å€‹æ”¶ä»¶è€…çš„é‡‘é‘°åŠ å¯†|
|`/kms/wrap-key`|POST|user|åŒ…è£ä¸€å€‹ä½¿ç”¨è€…è‡ªå·±ç”¢ç”Ÿçš„ DEK|
|`/kms/decrypt-data-key`|POST|user|è§£åŒ… DEKï¼ˆè¦ç¢ºèª JWT æ˜¯æœ‰æ•ˆçš„ï¼‰|
|`/kms/rotate-cmk`|POST|admin|è¼ªæ›¿ CMK ä¸¦é‡æ–°åŒ…è£ DEK|
|`/kms/audit-log`|GET|auditor|è®€å–æ—¥èªŒ|
|`/kms/log-integrity`|GET|admin, auditor|ç¢ºèªæ—¥èªŒé›œæ¹ŠéŠçš„å®Œæ•´æ€§|

## ğŸ”µ Messaging Backend API (Spring)

é€™è£¡æ‰€æœ‰è«‹æ±‚éƒ½éœ€è¦ç¶“éæˆæ¬Šæ‰èƒ½åŸ·è¡Œ

|Endpoint|æ–¹æ³•|ç”¨é€”|
|---|---|---|
|`/app/messages`|POST|æ–°å¢è¨Šæ¯åŠåŒ…è£éçš„ DEK|
|`/app/messages/{id}`|GET|å–å¾—ç‰¹å®šè¨Šæ¯åŠåŒ…è£éçš„ DEK|
|`/app/groups/{id}`|GET|å–å¾—æŸå€‹èŠå¤©å®¤|
|`/app/groups`|GET|å–å¾—èŠå¤©å®¤åˆ—è¡¨|
|`/app/groups`|POST|æ–°å¢èŠå¤©å®¤|
|`/app/groups/{id}`|DELETE|åˆªé™¤èŠå¤©å®¤|
|`/app/groups/{id}`|PUT|æ›´æ–°èŠå¤©å®¤|

## ğŸŸ¢ Authentication API (Spring)

|Endpoint|æ–¹æ³•|ç”¨é€”|
|---|---|---|
|`/auth/register`|POST|è¨»å†Š|
|`/auth/login`|POST|ç™»å…¥|
|`/auth/verify-otp`|POST|2FA é©—è­‰|
|`/auth/token`|POST|å–å¾— JWT (`sub`, `role`, `2fa_verified`, `exp`)|